pipeline {
    agent any

    stages {
        stage('Docker Run') {
            steps {
                // Para evitar conflitos, pare e remova o container se já estiver em execução
                sh 'docker stop apache-server || true'
                sh 'docker rm apache-server || true'

                // Criar e rodar o container Apache com o arquivo de configuração
                sh 'docker run -d -p 3212:80 --name apache-server -v /caminho/para/httpd.conf:/etc/httpd/conf/httpd.conf httpd'
            }
        }

        stage('Verify') {
            steps {
                // Verifica se o container está rodando
                sh 'docker ps'
            }
        }
    }
}
